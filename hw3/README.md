HW 3
Описываем логику транзакций для своей модели данных

В вашем проекте базы данных опишите
транзакцию, которая будет включать в себя несколько действий
и исключать возможность взаимных блокировок и неоднозначных ситуаций

Описание должно включать в себя
- бизнес задачу
- вероятные проблемы
- SQL транзакции или возможно нескольких транзакций

Задача:
Редактирование поста
фазы:
- выбор поста
- изменение заголовка поста и тела поста

Особенности
- исключить возможность того что несколько пользователей редактируют заголовок поста и текст поста одновременно

SQL 

start transaction;

select post_title from posts where post_title='some title' limit 1 for update;

UPDATE posts SET post_title = 'new title',post_content='some new text';

commit;


Также стоит заметить, что использование FOR UPDATE лучше делать с выключенным autocommit-ом, так как вне зависимости от того, что вы залочили, после первого апдейта лок снимется.

mysql> SET autocommit=0;
 
 
