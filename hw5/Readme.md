HW5

Доработка проекта
С учетом всех пройденных занятий доработать свой проект до финального представления
В проекте должны быть

- схема

- документация

- примеры бизнес-задач которые решает база-----------

БЛОГ посвещен молодым авторам которые размещают свои романы

много текста -мало картинок -- аналог proza.ru

посещаемость около 50000 хостов в сутки

Романы большие по 1000 000 знаков
Итого:1000 000 +4 байта = 0.95мб размер романа (LONGTEXT)
LONGTEXT=L+4 байт

В базе размещено около 9000 романов
0.95*9000=8550 мб = 8.35Гб


LONGTEXT	
максимальная длина 4 294 967 295 символов

В плане количества знаков, то в романе "Война и мир" Льва Толстого два миллиона девятьсот тысяч, почти три миллиона. Так что, сказать однозначно, сколько должно быть знаков - каждый автор решает сам. Можно как Донцова и иже с нею штамповать каждый месяц по роману, что по прочтении оказывается в контейнере, а можно и годами писать. И не факт, что роман на 400000 знаков будет превосходит роман в сто тысяч знаков.


- рекомендации к использованию репликации

https://ruhighload.com/%D0%9A%D0%B0%D0%BA+%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B8%D1%82%D1%8C+mysql+master-slave+%D1%80%D0%B5%D0%BF%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8E%3F

Так как у меня блог то читаем со слейва а пишем и меняем через мастер
MASTER-MASTER репликацию считаю избыточной так как операции по изменению данных не являются привалирующеими


- рекомендации к резервному копированию

http://lagman.su/2010/01/mysql-zfs-backup/

Бэкапим MySQL на ZFS
Кстати, бэкапиться с ZFS на слейвах очень и очень просто:

view sourceprint?
1
#!/bin/sh
2
user='mysqlbackup';
3
pass='superpass';
4
/usr/local/bin/mysql -u $user -p$pass -e 'STOP SLAVE; FLUSH LOGS; FLUSH TABLES WITH READ LOCK; \
5
SYSTEM zfs destroy -r data/mysql@yesterday; \
6
SYSTEM zfs rename -r data/mysql@today @yesterday; \
7
SYSTEM zfs snapshot -r data/mysql@today; \
8
UNLOCK TABLES; START SLAVE;'


