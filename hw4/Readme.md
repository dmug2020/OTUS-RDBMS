hw4

Добавляем в модель данных дополнительные индексы и ограничения
1. Проводим анализ возможных запросов\отчетов\поиска данных
1.1 Сортировка постов по дате 
1.2 Полнотекстовый поиск по post_content,post_title ,comment_content
1.3 Запрос на вывод постов с промежутке времени 
1.4 Вывод топ 10 авторов по кол-ву лайков постов
1.5 Вывод топ 10 авторов по кол-ву комментов к постам

2. Предполагаем возможную кардинальность поля. 

Теория:

Определить кардинальность потенциальной колонки индексирования в существующей базе данных достаточно просто:

SELECT COUNT (DISTINCT колонка) FROM таблица
При проектировании новой базы данных проектировщик должен оценить кардинальность всех потенциальных индексируемых колонок во всех таблицах базы данных, исходя из имеющейся документации.

Способ, с помощью которого СУБД оценивает действие кардинальности, состоит в использовании фактора селективности выборки (selectivity factor). Фактора селективности выборки индекса определяется как величина, обратная кардинальности индексной колонки:

selectivity _ factor = \frac {1}{Cardinality}

Фактор селективности оценивает потенциальный объем операций ввода/вывода. Чем меньше фактор селективности, тем меньше требуется операций ввода/вывода для получения результирующего множества строк таблицы. СУБД оценивает эту величину, чтобы решить, использовать индекс для доступа к строкам таблицы или нет. 

Таким образом индексируемые поля считаю низко координальные

Индексируемые поля с типом индекса LFULLTEXT оносятся нормальному неистинному индексу. Допустимы нечеткие значения для индекса, поэтому индекс может содержать строки с одинаковыми значениями во всех столбцах индекса. Эти индексы не применяют никаких ограничений на ваши данные, поэтому они используются только для того, чтобы определенные запросы могли выполняться быстро.

Координальность будет высокой



3. Создаем дополнительные индексы - простые или композитные. 
Полезная статья https://ruhighload.com/%D0%98%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%D1%8B+%D0%B2+mysql 

3.1 Индекс user_login ставим UNIQUE

3.2 Ставим индекс на FULLTEXT на post_content,post_title ,comment_content - для ускорения полнотекстового поиска
3.3 Ставим индекс INDEX на атрибут TIMESTAMP так запросы по выводу постов в определенном промежутке времени будут использовать CREATED_AT

4. На каждый индекс пишем краткое описание зачем он нужен (почему по этому полю\полям).

5. Думаем какие логические ограничения в БД нужно добавить - например какие поля должны быть уникальны, в какие нужно добавить условия, чтобы не нарушить бизнес логику. Пример - нельзя провести операцию по переводу средств на отрицательную сумму. 

5.1 нельзя создать пользователя с именем admin (зарезервированнное)
5.2 На поле user_login и user_email мы накладываем сразу два ограничения: первое — уже знакомое нам NOT NULL, а второе — ограничение на уникальность значений в столбце, заданное при помощи спецификатора UNIQUE.
5.3 при удаление пользователя удаляются все его посты ON DELETE CASCADE — при удалении записи все связанные записи в дочерних таблицах также будут удалены.
5.4 при удалении поста удалются дочении строки в таблицах ON DELETE CASCADE 


6. Создаем ограничения по выбранным полям.






